<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>正常写法</title>
<style>
*{margin: 0; padding: 0;}
.tab{
    width: 880px;
    margin: 50px auto 0;
}
.header{
    overflow: hidden;
}
.header h3{
    font-size: 16px;
    color: #333;
    float: left;
    width: 220px;
    line-height: 40px;
    background-color: #eee;
    text-align: center;
    cursor: pointer;
}
.content .box{
    padding-top: 20px;
    overflow: hidden;
    display: none;
}
.content .box img{
    width: 200px;
    height: 260px;
    float: left;
    margin: 0 10px;
}

.header .active{
    background-color: #06A86E;
    color: #fff;
}
.content .show{
    display: block;
}
</style>
</head>
<body>
<div class="tab">
    <div class="header">
        <h3 class="active">喜剧</h3>
        <h3>剧情</h3>
        <h3>动作</h3>
        <h3>青春偶像</h3>
    </div>
    <div class="content">
        <div class="box show">
            <img src="01.png" alt="">
            <img src="01.png" alt="">
            <img src="01.png" alt="">
            <img src="01.png" alt="">
        </div>
        <div class="box">
            <img src="02.png" alt="">
            <img src="02.png" alt="">
            <img src="02.png" alt="">
            <img src="02.png" alt="">
        </div>
        <div class="box">
            <img src="03.png" alt="">
            <img src="03.png" alt="">
            <img src="03.png" alt="">
            <img src="03.png" alt="">
        </div>
        <div class="box">
            <img src="04.png" alt="">
            <img src="04.png" alt="">
            <img src="04.png" alt="">
            <img src="04.png" alt="">
        </div>
    </div>
</div>
<div class="tab">
    <div class="header">
        <h3 class="active">喜剧</h3>
        <h3>剧情</h3>
        <h3>动作</h3>
        <h3>青春偶像</h3>
    </div>
    <div class="content">
        <div class="box show">
            <img src="01.png" alt="">
            <img src="01.png" alt="">
            <img src="01.png" alt="">
            <img src="01.png" alt="">
        </div>
        <div class="box">
            <img src="02.png" alt="">
            <img src="02.png" alt="">
            <img src="02.png" alt="">
            <img src="02.png" alt="">
        </div>
        <div class="box">
            <img src="03.png" alt="">
            <img src="03.png" alt="">
            <img src="03.png" alt="">
            <img src="03.png" alt="">
        </div>
        <div class="box">
            <img src="04.png" alt="">
            <img src="04.png" alt="">
            <img src="04.png" alt="">
            <img src="04.png" alt="">
        </div>
    </div>
</div>

<script>

// 面向过程
// var aH3 = document.querySelectorAll('.header h3');
// var aBox = document.querySelectorAll('.box');
// var prevIndex = 0;//记录上次选中的下标
// for (var i = 0; i < aH3.length; i++){
//     aH3[i].index = i;//给元素添加一个属性index,记录它的下标
//     aH3[i].onclick = function (){
//         aH3[prevIndex].className = '';
//         aBox[prevIndex].className = 'box';
//         aH3[this.index].className = 'active';
//         aBox[this.index].className = 'box show';
//         prevIndex = this.index;//更新上一次的下标
//     }
// }


// 面向对象 
// function Tab(){
//     // this -> Tab的实例对象
//     this.aH3 = document.querySelectorAll('.header h3');
//     this.aBox = document.querySelectorAll('.box');
//     this.prevIndex = 0;//记录上次选中的下标
//     // var _this = this;
//     var self = this;
//     for (var i = 0; i < this.aH3.length; i++){
//         this.aH3[i].index = i;//给元素添加一个属性index,记录它的下标
//         this.aH3[i].onclick = function (){
//             // this -> 事件调用对象 h3
//             self.aH3[self.prevIndex].className = '';
//             self.aBox[self.prevIndex].className = 'box';
//             self.aH3[this.index].className = 'active';
//             self.aBox[this.index].className = 'box show';
//             self.prevIndex = this.index;//更新上一次的下标
//         }
//     }
// }
// var tab1 = new Tab();


// // 1. 定义构造函数，通常函数名的首字母大写
// function Tab(){
//     // 2. 把变量变成对象的属性
//     this.aH3 = document.querySelectorAll('.header h3');
//     this.aBox = document.querySelectorAll('.box');
//     this.prevIndex = 0;//记录上次选中的下标
//     // var _this = this;
//     var self = this;
//     for (var i = 0; i < this.aH3.length; i++){
//         this.aH3[i].index = i;//给元素添加一个属性index,记录它的下标
//         this.aH3[i].onclick = function (){
//             self.clickTab(this);
//         }
//     }
// }
// // 3. 把函数变成对象的方法（prototype原型）
// Tab.prototype.clickTab = function (dom){
//     // this -> Tab的实例对象
//     this.aH3[this.prevIndex].className = '';
//     this.aBox[this.prevIndex].className = 'box';
//     this.aH3[dom.index].className = 'active';
//     this.aBox[dom.index].className = 'box show';
//     this.prevIndex = dom.index;//更新上一次的下标
// }
// var tab1 = new Tab();



/* // 1. 定义构造函数，通常函数名的首字母大写
function Tab(){
    // 2. 把变量变成对象的属性
    this.aH3 = document.querySelectorAll('.header h3');
    this.aBox = document.querySelectorAll('.box');
    this.prevIndex = 0;//记录上次选中的下标
}
// 3. 把函数变成对象的方法（prototype原型）
Tab.prototype.clickTab = function (){
    // this -> Tab的实例对象
    var self = this;
    for (var i = 0; i < this.aH3.length; i++){
        this.aH3[i].index = i;//给元素添加一个属性index,记录它的下标
        this.aH3[i].onclick = function (){
            self.aH3[self.prevIndex].className = '';
            self.aBox[self.prevIndex].className = 'box';
            self.aH3[this.index].className = 'active';
            self.aBox[this.index].className = 'box show';
            self.prevIndex = this.index;//更新上一次的下标
        }
    }
    
}
// 4. 改错
// 5. 构造函数实例化
var tab1 = new Tab();
tab1.clickTab(); */


// 页面有多个选项卡怎么办？

// 1. 定义构造函数，通常函数名的首字母大写
function Tab(tits,cons){
    // 2. 把变量变成对象的属性
    this.aH3 = tits;
    this.aBox = cons;
    this.prevIndex = 0;//记录上次选中的下标
}
// 3. 把函数变成对象的方法（prototype原型）
Tab.prototype.clickTab = function (){
    // this -> Tab的实例对象
    var self = this;
    for (var i = 0; i < this.aH3.length; i++){
        this.aH3[i].index = i;//给元素添加一个属性index,记录它的下标
        this.aH3[i].onclick = function (){
            self.aH3[self.prevIndex].className = '';
            self.aBox[self.prevIndex].className = 'box';
            self.aH3[this.index].className = 'active';
            self.aBox[this.index].className = 'box show';
            self.prevIndex = this.index;//更新上一次的下标
        }
    }
}
// 4. 改错
// 5. 构造函数实例化
var tabs = document.querySelectorAll('.tab');
var tits1 = tabs[0].querySelectorAll('.header h3');
var tits2 = tabs[1].querySelectorAll('.header h3');
var cons1 = tabs[0].querySelectorAll('.box');
var cons2 = tabs[1].querySelectorAll('.box');
var tab1 = new Tab(tits1,cons1);
var tab2 = new Tab(tits2,cons2);
tab1.clickTab();
tab2.clickTab();

</script>
</body>
</html>